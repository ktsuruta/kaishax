{% extends "reports/base.html" %}

{% block content %}
<!--overview start-->

<div class="row">
    <div class="col-lg-12">
        <ol class="breadcrumb">
            <li><i class="fa fa-home"></i><a href="index.html">Home</a></li>
            <li><i class="fa fa-laptop"></i>{{ company.english_company_name }}</li>
        </ol>
    </div>
</div>

<div class="row">
    <!-- profile-widget -->
    <div class="col-lg-12">
        <div class="profile-widget profile-widget-info">
            <div class="panel-body">
                <div class="col-lg-4 col-sm-4">
                    <h4>{{ company.english_company_name }}</h4>
                    <h4>{{ company.company_name }}</h4>
                </div>
                <div class="col-lg-2 col-sm-2 follow-info">
                    <p>Code: <a href="https://stocks.finance.yahoo.co.jp/stocks/detail/?code={{ company.security_code }}" target="_blank">{{ company.security_code }}</a></p>
                    <p>Sector:  {{ sector }}</p>
                    <p>Stock market: </p>
                </div>
                <div class="col-lg-2 col-sm-6 follow-info weather-category">
                    <ul>
                        <li class="active">
                            {{ latest_report.net_sales }} million JPY<br> Latest Net Sales {{ latest_report.year }} {{ latest_report.type_of_current_period }}
                        </li>

                    </ul>
                </div>
                <div class="col-lg-2 col-sm-6 follow-info weather-category">
                    <ul>
                        <li class="active">
                            {{ latest_report.net_assets }} million JPY<br> Latest Net Assets {{ latest_report.year }} {{ latest_report.type_of_current_period }}
                        </li>

                    </ul>
                </div>
                <div class="col-lg-2 col-sm-6 follow-info weather-category">
                    <ul>
                        <li class="active">
                            {{ latest_report.eps }}<br> Latest EPS {{ latest_report.year }} {{ latest_report.type_of_current_period }}
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<br>
<div class="row">
    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box blue-bg">
            <div class="count">{{ latest_fiscal_report.net_sales }} <span class="unit">million JPY</span></div>
            <div class="title">Net Sales</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box blue-bg">
            <div class="count">{{ latest_fiscal_report.net_assets }} <span class="unit">million JPY</span></div>
            <div class="title">Net Assets</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box blue-bg">
            <div class="count">{{ latest_fiscal_report.per }}</div>
            <div class="title">PER</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <!--/.col-->

    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box brown-bg">
            <div class="count">{{ latest_fiscal_report.roe }}</div>
            <div class="title">ROE</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <!--/.col-->

    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box dark-bg">
            <div class="count">{{ latest_fiscal_report.eps }}</div>
            <div class="title">eps</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <!--/.col-->

    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12">
        <div class="info-box green-bg">
            <div class="count">{{ latest_fiscal_report.pay_out_ratio }}</div>
            <div class="title">Eqyuty to assets ratio</div>
            <div class="title">{{ latest_fiscal_report.year }}{{ latest_fiscal_report.type_of_current_period }}</div>
        </div>
        <!--/.info-box-->
    </div>
    <!--/.col-->

</div>
<!--/.row-->

<div class="col-lg-12">
    <section class="panel">
        <header class="panel-heading">
            <h3>Annual Chart
            </h3></header>
        <div class="panel-body">
            <div class="tab-pane" id="chartjs">

                <div class="row">
                    <!-- Net Sales -->
                    <div class="col-lg-6">
                        <section class="panel">
                            <header class="panel-heading">
                               Net Sales
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="net_sales" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>

                    <!-- Net Assets -->
                    <div class="col-lg-6">
                        <section class="panel">
                            <header class="panel-heading">
                                Revenues Operating / Ordinary / Profit Before Tax
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="revenues" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="row">
                    <!-- Net Sales -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                Cash Flow From Operating
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="cash_flow_from_operating" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>

                    <!-- Net Assets -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                Cash Flow From Investing
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="cash_flow_from_investing" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>

                    <!-- Net Assets -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                Cash Flow From Financing
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="cash_flow_from_financing" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>
                </div>

                <div class="row">
                    <!-- Net Sales -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                PER
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="per" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>

                    <!-- Net Assets -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                EPS
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="eps" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>

                    <!-- Net Assets -->
                    <div class="col-lg-4">
                        <section class="panel">
                            <header class="panel-heading">
                                ROE
                            </header>
                            <div class="panel-body text-center">
                                <canvas id="roe" height="300" width="500" style="width: 500px; height: 300px;"></canvas>
                            </div>
                        </section>
                    </div>
                </div>

            </div>
        </div>
    </section>
</div>
{% endblock %}

{% block chartdata %}
<script>
$(document).ready(function() {



    var barNetSalesData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.net_sales }}, {% endfor %}]
            },
        ]

    };


    var barRevenuesData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.operating_revenue }}, {% endfor %}]
            },
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.ordinary_revenue }}, {% endfor %}]
            },
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.profit_before_tax }}, {% endfor %}]
            },
        ]

    };
    var barCashFlowFromOperatingData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.cash_flow_from_operating }}, {% endfor %}]
            },
        ]

    };

    var barCashFlowFromInvestingData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.cash_flow_from_investing }}, {% endfor %}]
            },
        ]

    };
    var barCashFlowFromFinancingData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.cash_flow_from_financing }}, {% endfor %}]
            },
        ]

    };
    var barPerData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.per }}, {% endfor %}]
            },
        ]

    };

    var barEpsData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.eps }}, {% endfor %}]
            },
        ]

    };

    var barRoeData = {
        labels : [{% for report in fy_reports %}"{{ report.year }}", {% endfor %}],
        datasets : [
            {
                fillColor : "rgba(220,220,220,0.5)",
                strokeColor : "rgba(220,220,220,1)",
                data : [{% for report in fy_reports %}{{ report.roe }}, {% endfor %}]
            },
        ]

    };

    new Chart(document.getElementById("net_sales").getContext("2d")).Bar(barNetSalesData);
    new Chart(document.getElementById("revenues").getContext("2d")).Bar(barRevenuesData);
    new Chart(document.getElementById("cash_flow_from_operating").getContext("2d")).Bar(barCashFlowFromOperatingData);
    new Chart(document.getElementById("cash_flow_from_investing").getContext("2d")).Bar(barCashFlowFromInvestingData);
    new Chart(document.getElementById("cash_flow_from_financing").getContext("2d")).Bar(barCashFlowFromFinancingData);
    new Chart(document.getElementById("per").getContext("2d")).Bar(barPerData);
    new Chart(document.getElementById("eps").getContext("2d")).Bar(barEpsData);
    new Chart(document.getElementById("roe").getContext("2d")).Bar(barRoeData);

});
</script>
{% endblock %}
